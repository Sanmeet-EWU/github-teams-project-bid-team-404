---
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { getCollection } from 'astro:content';
import type { BlogPost } from '../../../types';
import "../../styles/blog.css";

interface Post {
  id: string;
  slug: string;
  body: string;
  collection: string;
  data: BlogPost;
}

const posts: Post[] = await getCollection('blog');
---

<html lang="en">
<head>
  <link rel="stylesheet" href="/styles/global.css">
  <link rel="stylesheet" href="/styles/blog.css">
</head>
<body>
  <Header />
  <main class="blog-main">
    <h1>Hot Recipes</h1>
    <section class="recipes-section">
      {posts.map((post) => (
        <article class="recipe-card">
          <a href={`/blog/${post.slug}`}>
            <img src={post.data.image} alt={post.data.title} class="recipe-image" />
            <div class="recipe-content">
              <h2>{post.data.title}</h2>
              <p>Chef {post.data.author}</p>
              <p>{post.data.excerpt}</p>
            </div>
            <div class="recipe-votes">
              <button><img src="/images/up.png" alt="Up arrow"></button>
              <span>0</span>
              <button><img src="/images/down.png" alt="Down arrow"></button>
            </div>
          </a>
        </article>
      ))}
    </section>
  </main>
  <Footer />
</body>
</html>
